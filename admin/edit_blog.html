<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Blog Posts - OpenStudent Admin</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --light: #f8fafc;
            --dark: #1e293b;
            --accent: #f59e0b;
            --border-radius: 8px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background-color: #f8fafc;
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--dark);
            color: white;
            padding: 1.5rem 0;
        }

        .sidebar-header {
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-header span {
            color: var(--accent);
        }

        .sidebar-nav {
            list-style: none;
            margin-top: 1.5rem;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 0.75rem 1.5rem;
            color: #cbd5e1;
            text-decoration: none;
            transition: var(--transition);
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 2rem;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 1.8rem;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }

        .btn:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #475569;
        }

        .btn-danger {
            background-color: #dc2626;
        }

        .btn-danger:hover {
            background-color: #b91c1c;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.875rem;
        }

        /* Blog Posts Grid */
        .blog-posts-container {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .search-box {
            position: relative;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            padding-left: 40px;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary);
        }

        /* Blog Posts Grid */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .blog-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid #e2e8f0;
        }

        .blog-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .blog-card-header {
            padding: 1.25rem 1.25rem 0.5rem;
        }

        .blog-card-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--dark);
            line-height: 1.4;
        }

        .blog-card-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--secondary);
            margin-bottom: 1rem;
        }

        .blog-card-content {
            padding: 0 1.25rem;
        }

        .blog-card-excerpt {
            color: var(--secondary);
            line-height: 1.6;
            margin-bottom: 1.25rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .blog-card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.25rem;
        }

        .tag {
            display: inline-block;
            padding: 4px 10px;
            background-color: #e0f2fe;
            color: var(--primary);
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .blog-card-actions {
            display: flex;
            gap: 0.75rem;
            padding: 0 1.25rem 1.25rem;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-left: 0.5rem;
        }

        .status-published {
            background-color: #dcfce7;
            color: #166534;
        }

        .status-draft {
            background-color: #ffedd5;
            color: #9a3412;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            grid-column: 1 / -1;
        }

        .empty-state-icon {
            font-size: 3rem;
            color: #cbd5e1;
            margin-bottom: 1rem;
        }

        .empty-state-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .empty-state-text {
            color: var(--secondary);
            margin-bottom: 2rem;
        }

        /* Confirmation Dialog */
        .confirmation-dialog {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .dialog-content {
            background-color: white;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 400px;
            padding: 2rem;
            text-align: center;
        }

        .dialog-title {
            margin-bottom: 1rem;
        }

        .dialog-message {
            margin-bottom: 2rem;
            color: var(--secondary);
        }

        .dialog-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        @media (max-width: 1024px) {
            .blog-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .admin-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                padding: 1rem;
            }

            .table-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .search-box {
                width: 100%;
            }

            .blog-grid {
                grid-template-columns: 1fr;
            }

            .blog-card-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>Open<span>Student</span></h1>
                <p>Admin Panel</p>
            </div>

            <ul class="sidebar-nav">
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="add_project.html">Add Project</a></li>
                <li><a href="edit_project.html">Edit Projects</a></li>
                <li><a href="blog_editor.html">Blog Editor</a></li>
                <li><a href="edit_blog.html" class="active">Edit Blog Posts</a></li>
                <li><a href="../index.html">View Site</a></li>
                <li><a href="#" id="logoutBtn">Logout</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <h2 class="page-title">Edit Blog Posts</h2>
                <a href="blog_editor.html" class="btn">Create New Post</a>
            </div>

            <div class="blog-posts-container">
                <div class="table-header">
                    <h3>All Blog Posts</h3>
                    <div class="search-box">
                        <span class="search-icon">üîç</span>
                        <input type="text" class="search-input" id="searchPosts" placeholder="Search blog posts...">
                    </div>
                </div>

                <div class="blog-grid" id="blogPostsGrid">
                    <!-- Blog Post 1 -->
                    <div class="blog-card" data-title="how student projects impact real world problems" data-tags="education,projects,impact">
                        <div class="blog-card-header">
                            <h3 class="blog-card-title">How Student Projects Can Impact Real-World Problems</h3>
                            <div class="blog-card-meta">
                                <span>Published: Oct 15, 2023</span>
                                <span class="status-badge status-published">Published</span>
                            </div>
                        </div>
                        <div class="blog-card-content">
                            <p class="blog-card-excerpt">Exploring the potential for academic work to transcend the classroom and create meaningful change in communities and industries. This post examines several case studies of student projects that made a real impact.</p>
                            <div class="blog-card-tags">
                                <span class="tag">education</span>
                                <span class="tag">projects</span>
                                <span class="tag">impact</span>
                            </div>
                        </div>
                        <div class="blog-card-actions">
                            <button class="btn btn-sm" onclick="editBlogPost(1)">Edit</button>
                            <button class="btn btn-sm btn-danger" onclick="confirmDeletePost(1)">Delete</button>
                        </div>
                    </div>

                    <!-- Blog Post 2 -->
                    <div class="blog-card" data-title="guide to open sourcing academic work" data-tags="opensource,academic,guide">
                        <div class="blog-card-header">
                            <h3 class="blog-card-title">A Guide to Open Sourcing Your Academic Work</h3>
                            <div class="blog-card-meta">
                                <span>Published: Oct 10, 2023</span>
                                <span class="status-badge status-published">Published</span>
                            </div>
                        </div>
                        <div class="blog-card-content">
                            <p class="blog-card-excerpt">Practical advice for students who want to share their research and projects with the world while maintaining proper attribution. Learn about licenses, platforms, and best practices for open source academic work.</p>
                            <div class="blog-card-tags">
                                <span class="tag">opensource</span>
                                <span class="tag">academic</span>
                                <span class="tag">guide</span>
                            </div>
                        </div>
                        <div class="blog-card-actions">
                            <button class="btn btn-sm" onclick="editBlogPost(2)">Edit</button>
                            <button class="btn btn-sm btn-danger" onclick="confirmDeletePost(2)">Delete</button>
                        </div>
                    </div>

                    <!-- Blog Post 3 -->
                    <div class="blog-card" data-title="benefits of collaborative learning programming" data-tags="programming,collaboration,learning">
                        <div class="blog-card-header">
                            <h3 class="blog-card-title">The Benefits of Collaborative Learning in Programming</h3>
                            <div class="blog-card-meta">
                                <span>Published: Oct 5, 2023</span>
                                <span class="status-badge status-published">Published</span>
                            </div>
                        </div>
                        <div class="blog-card-content">
                            <p class="blog-card-excerpt">How working together on coding projects can enhance learning outcomes, improve code quality, and prepare students for real-world software development environments. Tips for effective collaboration.</p>
                            <div class="blog-card-tags">
                                <span class="tag">programming</span>
                                <span class="tag">collaboration</span>
                                <span class="tag">learning</span>
                            </div>
                        </div>
                        <div class="blog-card-actions">
                            <button class="btn btn-sm" onclick="editBlogPost(3)">Edit</button>
                            <button class="btn btn-sm btn-danger" onclick="confirmDeletePost(3)">Delete</button>
                        </div>
                    </div>

                    <!-- Blog Post 4 -->
                    <div class="blog-card" data-title="future of education technology trends 2023" data-tags="edtech,trends,future">
                        <div class="blog-card-header">
                            <h3 class="blog-card-title">The Future of Education: Technology Trends in 2023</h3>
                            <div class="blog-card-meta">
                                <span>Published: Sep 28, 2023</span>
                                <span class="status-badge status-published">Published</span>
                            </div>
                        </div>
                        <div class="blog-card-content">
                            <p class="blog-card-excerpt">Exploring the latest innovations in educational technology, from AI-powered learning assistants to virtual reality classrooms. What these trends mean for students and educators in the coming year.</p>
                            <div class="blog-card-tags">
                                <span class="tag">edtech</span>
                                <span class="tag">trends</span>
                                <span class="tag">future</span>
                            </div>
                        </div>
                        <div class="blog-card-actions">
                            <button class="btn btn-sm" onclick="editBlogPost(4)">Edit</button>
                            <button class="btn btn-sm btn-danger" onclick="confirmDeletePost(4)">Delete</button>
                        </div>
                    </div>

                    <!-- Blog Post 5 -->
                    <div class="blog-card" data-title="building portfolio student projects draft" data-tags="portfolio,career,students">
                        <div class="blog-card-header">
                            <h3 class="blog-card-title">Building a Portfolio with Student Projects</h3>
                            <div class="blog-card-meta">
                                <span>Last updated: Oct 18, 2023</span>
                                <span class="status-badge status-draft">Draft</span>
                            </div>
                        </div>
                        <div class="blog-card-content">
                            <p class="blog-card-excerpt">How to select, document, and present your academic projects to create a compelling portfolio that impresses employers. Tips for highlighting your skills and the impact of your work.</p>
                            <div class="blog-card-tags">
                                <span class="tag">portfolio</span>
                                <span class="tag">career</span>
                                <span class="tag">students</span>
                            </div>
                        </div>
                        <div class="blog-card-actions">
                            <button class="btn btn-sm" onclick="editBlogPost(5)">Edit</button>
                            <button class="btn btn-sm btn-danger" onclick="confirmDeletePost(5)">Delete</button>
                        </div>
                    </div>
                </div>

                <!-- Empty state (initially hidden) -->
                <div id="emptyState" class="empty-state" style="display: none;">
                    <div class="empty-state-icon">üìù</div>
                    <h3 class="empty-state-title">No blog posts found</h3>
                    <p class="empty-state-text">No posts match your search criteria. Try a different search term or create a new post.</p>
                    <a href="blog_editor.html" class="btn">Create New Post</a>
                </div>
            </div>
        </main>
    </div>

    <!-- Delete Confirmation Dialog -->
    <div class="confirmation-dialog" id="deleteDialog">
        <div class="dialog-content">
            <h3 class="dialog-title">Confirm Deletion</h3>
            <p class="dialog-message">Are you sure you want to delete this blog post? This action cannot be undone.</p>
            <div class="dialog-actions">
                <button class="btn btn-danger" onclick="deleteBlogPost()">Delete</button>
                <button class="btn btn-secondary" onclick="closeDeleteDialog()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Dummy blog post data
        const blogPosts = [
            {
                id: 1,
                title: "How Student Projects Can Impact Real-World Problems",
                content: "# How Student Projects Can Impact Real-World Problems\n\nExploring the potential for academic work to transcend the classroom...",
                excerpt: "Exploring the potential for academic work to transcend the classroom and create meaningful change in communities and industries.",
                tags: ["education", "projects", "impact"],
                status: "published",
                published_at: "2023-10-15",
                updated_at: "2023-10-15"
            },
            {
                id: 2,
                title: "A Guide to Open Sourcing Your Academic Work",
                content: "# A Guide to Open Sourcing Your Academic Work\n\nPractical advice for students who want to share their research...",
                excerpt: "Practical advice for students who want to share their research and projects with the world while maintaining proper attribution.",
                tags: ["opensource", "academic", "guide"],
                status: "published",
                published_at: "2023-10-10",
                updated_at: "2023-10-10"
            },
            {
                id: 3,
                title: "The Benefits of Collaborative Learning in Programming",
                content: "# The Benefits of Collaborative Learning in Programming\n\nHow working together on coding projects can enhance learning outcomes...",
                excerpt: "How working together on coding projects can enhance learning outcomes, improve code quality, and prepare students for real-world software development.",
                tags: ["programming", "collaboration", "learning"],
                status: "published",
                published_at: "2023-10-05",
                updated_at: "2023-10-05"
            },
            {
                id: 4,
                title: "The Future of Education: Technology Trends in 2023",
                content: "# The Future of Education: Technology Trends in 2023\n\nExploring the latest innovations in educational technology...",
                excerpt: "Exploring the latest innovations in educational technology, from AI-powered learning assistants to virtual reality classrooms.",
                tags: ["edtech", "trends", "future"],
                status: "published",
                published_at: "2023-09-28",
                updated_at: "2023-09-28"
            },
            {
                id: 5,
                title: "Building a Portfolio with Student Projects",
                content: "# Building a Portfolio with Student Projects\n\nHow to select, document, and present your academic projects...",
                excerpt: "How to select, document, and present your academic projects to create a compelling portfolio that impresses employers.",
                tags: ["portfolio", "career", "students"],
                status: "draft",
                published_at: null,
                updated_at: "2023-10-18"
            }
        ];

        let postToDelete = null;

        // Edit blog post - redirect to editor with post ID
        function editBlogPost(postId) {
            // TODO: In a real implementation, this would redirect to the editor with the post ID
            // For now, just show a message
            console.log('Editing blog post:', postId);
            alert('Redirecting to editor with post ID: ' + postId + '\n\nIn a real implementation, this would open the blog editor with the post data loaded.');

            // Example of how this would work with Supabase:
            /*
            // Store the post ID to edit in session storage or pass as URL parameter
            sessionStorage.setItem('editPostId', postId);
            window.location.href = 'blog_editor.html';
            */
        }

        // Confirm post deletion
        function confirmDeletePost(postId) {
            postToDelete = postId;
            document.getElementById('deleteDialog').style.display = 'flex';
        }

        // Close delete confirmation dialog
        function closeDeleteDialog() {
            postToDelete = null;
            document.getElementById('deleteDialog').style.display = 'none';
        }

        // Delete blog post
        function deleteBlogPost() {
            if (!postToDelete) return;

            // TODO: Replace with Supabase delete logic
            /*
            async function deletePostFromDB() {
                const { error } = await supabase
                    .from('blog_posts')
                    .delete()
                    .eq('id', postToDelete);

                if (error) {
                    console.error('Error deleting post:', error.message);
                    alert('Error deleting post: ' + error.message);
                    return;
                }

                // Close dialog and refresh post list
                closeDeleteDialog();
                loadBlogPosts(); // Refresh the post list
            }

            deletePostFromDB();
            */

            // For now, just log the deletion and close the dialog
            console.log('Deleting blog post:', postToDelete);
            closeDeleteDialog();
            alert('Blog post deleted successfully! (This will be connected to Supabase)');
        }

        // Search functionality
        document.getElementById('searchPosts').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.blog-card');
            let visibleCount = 0;

            cards.forEach(card => {
                const title = card.getAttribute('data-title');
                const tags = card.getAttribute('data-tags');

                if (title.includes(searchTerm) || tags.includes(searchTerm)) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // Show empty state if no posts match
            const emptyState = document.getElementById('emptyState');
            if (visibleCount === 0 && searchTerm) {
                emptyState.style.display = 'block';
            } else {
                emptyState.style.display = 'none';
            }
        });

        // TODO: Load blog posts from Supabase
        /*
        async function loadBlogPosts() {
            const { data, error } = await supabase
                .from('blog_posts')
                .select('*')
                .order('created_at', { ascending: false });

            if (error) {
                console.error('Error loading blog posts:', error.message);
                return;
            }

            // Render blog posts in the grid
            renderBlogPosts(data);
        }
        */

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'login.html';
        });

        // Close dialog when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === document.getElementById('deleteDialog')) {
                closeDeleteDialog();
            }
        });
    </script>
</body>
</html>